<div class="flex flex-col gap-5">
  <div class="flex flex-col gap-5 bg-[#15181F] h-full w-full p-4 border-2 border-[#E2A23B] rounded-[10px]">
    <app-create-paragraph [paragraphPayload]="paragraphForEdit" (sendParagraph)="addParagraph($event)"/>
  </div>
  <div *ngIf="sortedParagraphs.length > 0"
       class="bg-[#15181F] h-full w-full p-4 border-2 border-[#E2A23B] rounded-[10px] max-h-[1000px] overflow-y-auto">
    <div *ngIf="showPlaceForImage" class="pb-5 poppins-font flex flex-col justify-center items-center gap-2"
         [ngClass]="{
            'image-left': presetImageOptions.position === 'left',
            'image-right': presetImageOptions.position === 'right',
         }"
         [ngStyle]="{
            'width': presetImageOptions.width ? presetImageOptions.width + 'px' : 'auto',
            'height': presetImageOptions.height ? presetImageOptions.height + 'px' : 'auto'
         }"
    >
      <svg
        [ngStyle]="{
          'width': presetImageOptions.width + 'px',
          'height': presetImageOptions.height + 'px'
        }"
        width="350" height="500" viewBox="0 0 350 500" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="1" width="348" height="498" rx="9" fill="#15181F" stroke="#E2A23B" stroke-width="2"/>
        <path d="M158.517 196.536L150.741 211.576V219H145.269V211.576L137.493 196.536H143.701L148.053 205.944L152.373 196.536H158.517ZM168.442 219.256C166.693 219.256 165.114 218.883 163.706 218.136C162.319 217.389 161.221 216.323 160.41 214.936C159.621 213.549 159.226 211.928 159.226 210.072C159.226 208.237 159.631 206.627 160.442 205.24C161.253 203.832 162.362 202.755 163.77 202.008C165.178 201.261 166.757 200.888 168.506 200.888C170.255 200.888 171.834 201.261 173.242 202.008C174.65 202.755 175.759 203.832 176.57 205.24C177.381 206.627 177.786 208.237 177.786 210.072C177.786 211.907 177.37 213.528 176.538 214.936C175.727 216.323 174.607 217.389 173.178 218.136C171.77 218.883 170.191 219.256 168.442 219.256ZM168.442 214.52C169.487 214.52 170.373 214.136 171.098 213.368C171.845 212.6 172.218 211.501 172.218 210.072C172.218 208.643 171.855 207.544 171.13 206.776C170.426 206.008 169.551 205.624 168.506 205.624C167.439 205.624 166.554 206.008 165.85 206.776C165.146 207.523 164.794 208.621 164.794 210.072C164.794 211.501 165.135 212.6 165.818 213.368C166.522 214.136 167.397 214.52 168.442 214.52ZM197.913 201.144V219H192.441V216.568C191.886 217.357 191.129 217.997 190.169 218.488C189.23 218.957 188.185 219.192 187.033 219.192C185.668 219.192 184.462 218.893 183.417 218.296C182.372 217.677 181.561 216.792 180.985 215.64C180.409 214.488 180.121 213.133 180.121 211.576V201.144H185.561V210.84C185.561 212.035 185.87 212.963 186.489 213.624C187.108 214.285 187.94 214.616 188.985 214.616C190.052 214.616 190.894 214.285 191.513 213.624C192.132 212.963 192.441 212.035 192.441 210.84V201.144H197.913ZM206.907 204.12C207.547 203.139 208.347 202.371 209.307 201.816C210.267 201.24 211.334 200.952 212.507 200.952V206.744H211.003C209.638 206.744 208.614 207.043 207.931 207.64C207.249 208.216 206.907 209.24 206.907 210.712V219H201.435V201.144H206.907V204.12ZM88.4175 235.288C87.4575 235.288 86.6682 235.011 86.0495 234.456C85.4522 233.88 85.1535 233.176 85.1535 232.344C85.1535 231.491 85.4522 230.787 86.0495 230.232C86.6682 229.656 87.4575 229.368 88.4175 229.368C89.3562 229.368 90.1242 229.656 90.7215 230.232C91.3402 230.787 91.6495 231.491 91.6495 232.344C91.6495 233.176 91.3402 233.88 90.7215 234.456C90.1242 235.011 89.3562 235.288 88.4175 235.288ZM91.1375 237.144V255H85.6655V237.144H91.1375ZM117.479 236.952C119.698 236.952 121.458 237.624 122.759 238.968C124.082 240.312 124.743 242.179 124.743 244.568V255H119.303V245.304C119.303 244.152 118.994 243.267 118.375 242.648C117.778 242.008 116.946 241.688 115.879 241.688C114.812 241.688 113.97 242.008 113.351 242.648C112.754 243.267 112.455 244.152 112.455 245.304V255H107.015V245.304C107.015 244.152 106.706 243.267 106.087 242.648C105.49 242.008 104.658 241.688 103.591 241.688C102.524 241.688 101.682 242.008 101.063 242.648C100.466 243.267 100.167 244.152 100.167 245.304V255H94.695V237.144H100.167V239.384C100.722 238.637 101.447 238.051 102.343 237.624C103.239 237.176 104.252 236.952 105.383 236.952C106.727 236.952 107.922 237.24 108.967 237.816C110.034 238.392 110.866 239.213 111.463 240.28C112.082 239.299 112.924 238.499 113.991 237.88C115.058 237.261 116.22 236.952 117.479 236.952ZM127.074 246.04C127.074 244.205 127.415 242.595 128.098 241.208C128.802 239.821 129.751 238.755 130.946 238.008C132.141 237.261 133.474 236.888 134.946 236.888C136.205 236.888 137.303 237.144 138.242 237.656C139.202 238.168 139.938 238.84 140.45 239.672V237.144H145.922V255H140.45V252.472C139.917 253.304 139.17 253.976 138.21 254.488C137.271 255 136.173 255.256 134.914 255.256C133.463 255.256 132.141 254.883 130.946 254.136C129.751 253.368 128.802 252.291 128.098 250.904C127.415 249.496 127.074 247.875 127.074 246.04ZM140.45 246.072C140.45 244.707 140.066 243.629 139.298 242.84C138.551 242.051 137.634 241.656 136.546 241.656C135.458 241.656 134.53 242.051 133.762 242.84C133.015 243.608 132.642 244.675 132.642 246.04C132.642 247.405 133.015 248.493 133.762 249.304C134.53 250.093 135.458 250.488 136.546 250.488C137.634 250.488 138.551 250.093 139.298 249.304C140.066 248.515 140.45 247.437 140.45 246.072ZM156.257 236.888C157.515 236.888 158.614 237.144 159.553 237.656C160.513 238.168 161.249 238.84 161.761 239.672V237.144H167.233V254.968C167.233 256.611 166.902 258.093 166.241 259.416C165.601 260.76 164.609 261.827 163.265 262.616C161.942 263.405 160.289 263.8 158.305 263.8C155.659 263.8 153.515 263.171 151.873 261.912C150.23 260.675 149.291 258.989 149.057 256.856H154.465C154.635 257.539 155.041 258.072 155.681 258.456C156.321 258.861 157.11 259.064 158.049 259.064C159.179 259.064 160.075 258.733 160.737 258.072C161.419 257.432 161.761 256.397 161.761 254.968V252.44C161.227 253.272 160.491 253.955 159.553 254.488C158.614 255 157.515 255.256 156.257 255.256C154.785 255.256 153.451 254.883 152.257 254.136C151.062 253.368 150.113 252.291 149.409 250.904C148.726 249.496 148.385 247.875 148.385 246.04C148.385 244.205 148.726 242.595 149.409 241.208C150.113 239.821 151.062 238.755 152.257 238.008C153.451 237.261 154.785 236.888 156.257 236.888ZM161.761 246.072C161.761 244.707 161.377 243.629 160.609 242.84C159.862 242.051 158.945 241.656 157.857 241.656C156.769 241.656 155.841 242.051 155.073 242.84C154.326 243.608 153.953 244.675 153.953 246.04C153.953 247.405 154.326 248.493 155.073 249.304C155.841 250.093 156.769 250.488 157.857 250.488C158.945 250.488 159.862 250.093 160.609 249.304C161.377 248.515 161.761 247.437 161.761 246.072ZM187.615 245.784C187.615 246.296 187.583 246.829 187.52 247.384H175.135C175.221 248.493 175.573 249.347 176.191 249.944C176.831 250.52 177.61 250.808 178.528 250.808C179.893 250.808 180.842 250.232 181.375 249.08H187.2C186.901 250.253 186.357 251.309 185.568 252.248C184.8 253.187 183.829 253.923 182.656 254.456C181.482 254.989 180.17 255.256 178.719 255.256C176.97 255.256 175.413 254.883 174.047 254.136C172.682 253.389 171.615 252.323 170.847 250.936C170.079 249.549 169.695 247.928 169.695 246.072C169.695 244.216 170.069 242.595 170.815 241.208C171.583 239.821 172.65 238.755 174.015 238.008C175.381 237.261 176.949 236.888 178.719 236.888C180.448 236.888 181.984 237.251 183.328 237.976C184.672 238.701 185.717 239.736 186.464 241.08C187.231 242.424 187.615 243.992 187.615 245.784ZM182.016 244.344C182.016 243.405 181.696 242.659 181.056 242.104C180.416 241.549 179.616 241.272 178.656 241.272C177.738 241.272 176.959 241.539 176.319 242.072C175.701 242.605 175.317 243.363 175.168 244.344H182.016ZM197.358 255.256C195.801 255.256 194.414 254.989 193.198 254.456C191.982 253.923 191.022 253.197 190.318 252.28C189.614 251.341 189.22 250.296 189.134 249.144H194.542C194.606 249.763 194.894 250.264 195.406 250.648C195.918 251.032 196.548 251.224 197.294 251.224C197.977 251.224 198.5 251.096 198.862 250.84C199.246 250.563 199.438 250.211 199.438 249.784C199.438 249.272 199.172 248.899 198.638 248.664C198.105 248.408 197.241 248.131 196.046 247.832C194.766 247.533 193.7 247.224 192.846 246.904C191.993 246.563 191.257 246.04 190.638 245.336C190.02 244.611 189.71 243.64 189.71 242.424C189.71 241.4 189.988 240.472 190.542 239.64C191.118 238.787 191.95 238.115 193.038 237.624C194.148 237.133 195.46 236.888 196.974 236.888C199.214 236.888 200.974 237.443 202.254 238.552C203.556 239.661 204.302 241.133 204.494 242.968H199.438C199.353 242.349 199.076 241.859 198.606 241.496C198.158 241.133 197.561 240.952 196.814 240.952C196.174 240.952 195.684 241.08 195.342 241.336C195.001 241.571 194.83 241.901 194.83 242.328C194.83 242.84 195.097 243.224 195.63 243.48C196.185 243.736 197.038 243.992 198.19 244.248C199.513 244.589 200.59 244.931 201.422 245.272C202.254 245.592 202.98 246.125 203.598 246.872C204.238 247.597 204.569 248.579 204.59 249.816C204.59 250.861 204.292 251.8 203.694 252.632C203.118 253.443 202.276 254.083 201.166 254.552C200.078 255.021 198.809 255.256 197.358 255.256ZM239.535 237.144L234.703 255H228.655L225.839 243.416L222.927 255H216.911L212.047 237.144H217.519L220.047 249.912L223.055 237.144H228.847L231.887 249.848L234.383 237.144H239.535ZM243.966 235.288C243.006 235.288 242.217 235.011 241.598 234.456C241.001 233.88 240.702 233.176 240.702 232.344C240.702 231.491 241.001 230.787 241.598 230.232C242.217 229.656 243.006 229.368 243.966 229.368C244.905 229.368 245.673 229.656 246.27 230.232C246.889 230.787 247.198 231.491 247.198 232.344C247.198 233.176 246.889 233.88 246.27 234.456C245.673 235.011 244.905 235.288 243.966 235.288ZM246.686 237.144V255H241.214V237.144H246.686ZM255.716 231.32V255H250.244V231.32H255.716ZM264.745 231.32V255H259.273V231.32H264.745ZM122.227 275.672C122.739 274.84 123.475 274.168 124.435 273.656C125.395 273.144 126.494 272.888 127.731 272.888C129.203 272.888 130.536 273.261 131.731 274.008C132.926 274.755 133.864 275.821 134.547 277.208C135.251 278.595 135.603 280.205 135.603 282.04C135.603 283.875 135.251 285.496 134.547 286.904C133.864 288.291 132.926 289.368 131.731 290.136C130.536 290.883 129.203 291.256 127.731 291.256C126.472 291.256 125.374 291.011 124.435 290.52C123.496 290.008 122.76 289.336 122.227 288.504V291H116.755V267.32H122.227V275.672ZM130.035 282.04C130.035 280.675 129.651 279.608 128.883 278.84C128.136 278.051 127.208 277.656 126.099 277.656C125.011 277.656 124.083 278.051 123.315 278.84C122.568 279.629 122.195 280.707 122.195 282.072C122.195 283.437 122.568 284.515 123.315 285.304C124.083 286.093 125.011 286.488 126.099 286.488C127.187 286.488 128.115 286.093 128.883 285.304C129.651 284.493 130.035 283.405 130.035 282.04ZM154.898 281.784C154.898 282.296 154.866 282.829 154.802 283.384H142.418C142.503 284.493 142.855 285.347 143.474 285.944C144.114 286.52 144.892 286.808 145.81 286.808C147.175 286.808 148.124 286.232 148.658 285.08H154.482C154.183 286.253 153.639 287.309 152.85 288.248C152.082 289.187 151.111 289.923 149.938 290.456C148.764 290.989 147.452 291.256 146.002 291.256C144.252 291.256 142.695 290.883 141.33 290.136C139.964 289.389 138.898 288.323 138.13 286.936C137.362 285.549 136.978 283.928 136.978 282.072C136.978 280.216 137.351 278.595 138.098 277.208C138.866 275.821 139.932 274.755 141.298 274.008C142.663 273.261 144.231 272.888 146.002 272.888C147.73 272.888 149.266 273.251 150.61 273.976C151.954 274.701 152.999 275.736 153.746 277.08C154.514 278.424 154.898 279.992 154.898 281.784ZM149.298 280.344C149.298 279.405 148.978 278.659 148.338 278.104C147.698 277.549 146.898 277.272 145.938 277.272C145.02 277.272 144.242 277.539 143.602 278.072C142.983 278.605 142.599 279.363 142.45 280.344H149.298ZM174.726 272.952C176.774 272.952 178.416 273.635 179.654 275C180.891 276.344 181.51 278.2 181.51 280.568V291H176.07V281.304C176.07 280.109 175.76 279.181 175.142 278.52C174.523 277.859 173.691 277.528 172.646 277.528C171.6 277.528 170.768 277.859 170.15 278.52C169.531 279.181 169.222 280.109 169.222 281.304V291H163.75V267.32H169.222V275.544C169.776 274.755 170.534 274.125 171.494 273.656C172.454 273.187 173.531 272.952 174.726 272.952ZM201.736 281.784C201.736 282.296 201.704 282.829 201.64 283.384H189.256C189.341 284.493 189.693 285.347 190.312 285.944C190.952 286.52 191.731 286.808 192.648 286.808C194.013 286.808 194.963 286.232 195.496 285.08H201.32C201.021 286.253 200.477 287.309 199.688 288.248C198.92 289.187 197.949 289.923 196.776 290.456C195.603 290.989 194.291 291.256 192.84 291.256C191.091 291.256 189.533 290.883 188.168 290.136C186.803 289.389 185.736 288.323 184.968 286.936C184.2 285.549 183.816 283.928 183.816 282.072C183.816 280.216 184.189 278.595 184.936 277.208C185.704 275.821 186.771 274.755 188.136 274.008C189.501 273.261 191.069 272.888 192.84 272.888C194.568 272.888 196.104 273.251 197.448 273.976C198.792 274.701 199.837 275.736 200.584 277.08C201.352 278.424 201.736 279.992 201.736 281.784ZM196.136 280.344C196.136 279.405 195.816 278.659 195.176 278.104C194.536 277.549 193.736 277.272 192.776 277.272C191.859 277.272 191.08 277.539 190.44 278.072C189.821 278.605 189.437 279.363 189.288 280.344H196.136ZM209.687 276.12C210.327 275.139 211.127 274.371 212.087 273.816C213.047 273.24 214.114 272.952 215.287 272.952V278.744H213.783C212.418 278.744 211.394 279.043 210.711 279.64C210.028 280.216 209.687 281.24 209.687 282.712V291H204.215V273.144H209.687V276.12ZM234.326 281.784C234.326 282.296 234.294 282.829 234.23 283.384H221.846C221.932 284.493 222.284 285.347 222.902 285.944C223.542 286.52 224.321 286.808 225.238 286.808C226.604 286.808 227.553 286.232 228.086 285.08H233.91C233.612 286.253 233.068 287.309 232.278 288.248C231.51 289.187 230.54 289.923 229.366 290.456C228.193 290.989 226.881 291.256 225.43 291.256C223.681 291.256 222.124 290.883 220.758 290.136C219.393 289.389 218.326 288.323 217.558 286.936C216.79 285.549 216.406 283.928 216.406 282.072C216.406 280.216 216.78 278.595 217.526 277.208C218.294 275.821 219.361 274.755 220.726 274.008C222.092 273.261 223.66 272.888 225.43 272.888C227.158 272.888 228.694 273.251 230.038 273.976C231.382 274.701 232.428 275.736 233.174 277.08C233.942 278.424 234.326 279.992 234.326 281.784ZM228.726 280.344C228.726 279.405 228.406 278.659 227.766 278.104C227.126 277.549 226.326 277.272 225.366 277.272C224.449 277.272 223.67 277.539 223.03 278.072C222.412 278.605 222.028 279.363 221.878 280.344H228.726Z" fill="#B1A79C"/>
      </svg>
    </div>
    <div
      class="paragraph relative border-2 border-transparent hover:border-[#E2A23B] cursor-pointer box-content transition duration-300"
      (click)="callContextMenu(paragraph)" *ngFor="let paragraph of sortedParagraphs">
      <app-description-structural-paragraph [showPlaceForImage]="showPlaceForImage"
                                            [paragraph]="paragraph"/>
      <button
        [class]="paragraph.type === 'image' && getImageAlignment(paragraph.metadata) === 'left' ? 'left-0' : 'right-0'"
        (click)="moveElement('up', paragraph, $event)"
        class="absolute hover:bg-[#E2A23B] top-0 z-10 h-[30px] w-[30px] rounded border border-[#E2A23B] flex items-center justify-center">
        <mat-icon class="text-[#E2A23B] h-[20px] w-[20px] hover:text-black">keyboard_arrow_up</mat-icon>
      </button>
      <button
        [class]="paragraph.type === 'image' && getImageAlignment(paragraph.metadata) === 'left' ? 'left-0' : 'right-0'"
        (click)="moveElement('down', paragraph, $event)"
        class="absolute hover:bg-[#E2A23B] bottom-0 z-10 h-[30px] w-[30px] rounded border border-[#E2A23B] flex items-center justify-center">
        <mat-icon class="text-[#E2A23B] h-[20px] w-[20px] hover:text-black">keyboard_arrow_down</mat-icon>
      </button>
    </div>
  </div>
</div>
