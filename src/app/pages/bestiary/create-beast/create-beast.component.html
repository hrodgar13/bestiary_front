<mat-drawer class="h-full p-2 primary-bg mt-[48px] w-[200px] 768:mt-[112px]" #CreateBeastDrawer>
  <h2 class="text-xl text-center playfair-font text-[#E2A23B]">Redactor Tools</h2>
  <div class="flex flex-col w-full h-auto p-4">

  </div>
</mat-drawer>
<button [class.openMenu]="CreateBeastDrawer.opened"
        class="button-half menu duration-300 transition z-10 border-t top-[45%] primary-bg fixed border-b border-r rounded-r-md border-[#E2A23B] h-[30px] w-[30px] flex items-center justify-center"
        (click)="CreateBeastDrawer.toggle()">
  <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M13.2328 16.4569C12.9328 16.7426 12.9212 17.2173 13.2069 17.5172C13.4926 17.8172 13.9673 17.8288 14.2672 17.5431L13.2328 16.4569ZM19.5172 12.5431C19.8172 12.2574 19.8288 11.7827 19.5431 11.4828C19.2574 11.1828 18.7827 11.1712 18.4828 11.4569L19.5172 12.5431ZM18.4828 12.5431C18.7827 12.8288 19.2574 12.8172 19.5431 12.5172C19.8288 12.2173 19.8172 11.7426 19.5172 11.4569L18.4828 12.5431ZM14.2672 6.4569C13.9673 6.17123 13.4926 6.18281 13.2069 6.48276C12.9212 6.78271 12.9328 7.25744 13.2328 7.5431L14.2672 6.4569ZM19 12.75C19.4142 12.75 19.75 12.4142 19.75 12C19.75 11.5858 19.4142 11.25 19 11.25V12.75ZM5 11.25C4.58579 11.25 4.25 11.5858 4.25 12C4.25 12.4142 4.58579 12.75 5 12.75V11.25ZM14.2672 17.5431L19.5172 12.5431L18.4828 11.4569L13.2328 16.4569L14.2672 17.5431ZM19.5172 11.4569L14.2672 6.4569L13.2328 7.5431L18.4828 12.5431L19.5172 11.4569ZM19 11.25L5 11.25V12.75L19 12.75V11.25Z"
      fill="#E2A23B"/>
  </svg>
</button>
<mat-drawer-container class="primary-bg h-full mt-[48px] 768:mt-[112px]">
  <div
    class="flex-row poppins-font items-center 768:items-start px-1 768:px-[20px] mt-[48px] 768:mt-[112px]">
    <div
      class="flex flex-col relative items-center 768:items-start gap-2 h-auto w-full bg-[#1E232DFF] rounded border-2 border-[#E2A23B]">
      <form [formGroup]="creatureForm" *ngIf="creatureForm" class="p-2 768:p-5 flex flex-col gap-6 w-full ">
        <div class="flex items-center flex-col 640:flex-row gap-3">
          <app-label-text [label]="'Creature name'"></app-label-text>
          <app-input-text formControlName="name_en" class="h-[48px] w-full max-w-[280px]"
                          [placeholder]="'EN'"></app-input-text>
          <app-input-text formControlName="name_ua" class="h-[48px] w-full max-w-[280px]"
                          [placeholder]="'UA'"></app-input-text>
        </div>
        <div class="flex gap-3 w-full flex-col 1024:flex-row">
          <div class="flex flex-col items-center gap-3 w-full">
            <div class="flex gap-3 w-full flex-col 640:flex-row 640:items-center">
              <app-label-text [label]="'alignment'"/>
              <div class="flex justify-between w-full gap-1">
                <app-input-select formControlName="alignment" [attribute_code]="AttributesCodes.alignment"
                                  class="h-[48px] w-full"
                                  [placeholder]="'Select Alignment'"/>
                <app-input-green-btn [route]="AttributesCodes.alignment" [title]="'Add'"/>
              </div>
            </div>
            <div class="flex flex-col gap-3 w-full 640:flex-row 640:items-center">
              <app-label-text [label]="'type'"/>
              <div class="flex items-center justify-between w-full gap-1">
                <app-input-select formControlName="type" [attribute_code]="AttributesCodes.type" class="h-[48px] w-full"
                                  [placeholder]="'Select Type'"/>
                <app-input-green-btn [route]="AttributesCodes.type" [title]="'Add'"/>
              </div>
            </div>
            <div class="flex gap-3 flex-col w-full 640:flex-row 640:items-center">
              <app-label-text [label]="'size'"/>
              <div class="flex items-center justify-between w-full gap-1">
                <app-input-select formControlName="size" [attribute_code]="AttributesCodes.size"
                                  class="h-[48px] w-full "
                                  [placeholder]="'Select Size'"/>
                <app-input-green-btn [route]="AttributesCodes.size" [title]="'Add'"/>
              </div>
            </div>
            <div class="flex w-full flex-col gap-3 640:flex-row 640:items-center">
              <div class="flex gap-3 items-center">
                <app-label-text [label]="'Hits'"/>
                <app-input-number formControlName="hits" [placeholder]="'0'" class="h-[48px]"/>
              </div>
              <div class="flex gap-3 items-center w-full">
                <app-label-text [label]="'Hits in dice'"/>
                <app-input-text formControlName="hits_in_dice" class="h-[48px] w-full"
                                [placeholder]="'Hits in dice'"/>
              </div>
            </div>
            <div class="flex w-full flex-col gap-3 640:flex-row 640:items-center">
              <div class="flex gap-3 items-center">
                <app-label-text [label]="'Armor class'"/>
                <app-input-number formControlName="armor_class" [placeholder]="'0'" class="h-[48px]"></app-input-number>
              </div>
            </div>
            <div class="w-full">
              <app-multi-select label="armor_tag" [defaultValues]="filterMeasuresByCategories(MeasuresCodes.armor_tag)"
                                (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                                [attribute_code]="AttributesCodes.armor_tag" [placeholder]="'Select armor tags:'"
                                [enableAmt]="false"
                                [measure_code]="MeasuresCodes.armor_tag"
                                [enableMsr]="false" [alwaysUseMsr]="false"/>
            </div>
            <div class="w-full">
              <app-multi-select label="speeds"
                                [defaultValues]="filterMeasuresByCategories(MeasuresCodes.speeds)"
                                (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                                [attribute_code]="AttributesCodes.speeds" [placeholder]="'Select speed:'"
                                [enableAmt]="true"
                                [measure_code]="MeasuresCodes.speeds"
                                [amtNullValidator]="true"
                                [enableMsr]="true" [alwaysUseMsr]="true"/>
            </div>
          </div>
          <div class="flex image-load w-full min-h-[350px]">
            <app-input-file [currentImage]="this.creatureImage" (fileLoaded)="setPhoto($event)" class="w-full "/>
          </div>
        </div>
        <div class="flex items-center justify-between flex-wrap gap-y-4">
          <app-statblock-input
            (detectCharacteristicChange)="setScaleFromCharacteristic(CHARACTERISTIC_CODE.strength, $event)"
            formControlName="strength" label="{{'STR' | transloco}}"
            class="h-[130px] max-w-[130px]  640:max-w-[150px] 640:h-[150px] 1280:max-w-[180px] 1280:h-[180px] w-full"/>
          <app-statblock-input formControlName="dexterity" label="{{'DEX' | transloco}}"
                               (detectCharacteristicChange)="setScaleFromCharacteristic(CHARACTERISTIC_CODE.dexterity, $event)"
                               class="h-[130px] max-w-[130px]  640:max-w-[150px] 640:h-[150px] 1280:max-w-[180px] 1280:h-[180px] w-full"/>
          <app-statblock-input formControlName="constitution" label="{{'CON' | transloco}}"
                               (detectCharacteristicChange)="setScaleFromCharacteristic(CHARACTERISTIC_CODE.constitution, $event)"
                               class="h-[130px] max-w-[130px]  640:max-w-[150px] 640:h-[150px] 1280:max-w-[180px] 1280:h-[180px] w-full"/>
          <app-statblock-input formControlName="intelligence" label="{{'INT' | transloco}}"
                               (detectCharacteristicChange)="setScaleFromCharacteristic(CHARACTERISTIC_CODE.intelligence, $event)"
                               class="h-[130px] max-w-[130px]  640:max-w-[150px] 640:h-[150px] 1280:max-w-[180px] 1280:h-[180px] w-full"/>
          <app-statblock-input formControlName="wisdom" label="{{'WIS' | transloco}}"
                               (detectCharacteristicChange)="setScaleFromCharacteristic(CHARACTERISTIC_CODE.wisdom, $event)"
                               class="h-[130px] max-w-[130px]  640:max-w-[150px] 640:h-[150px] 1280:max-w-[180px] 1280:h-[180px] w-full"/>
          <app-statblock-input formControlName="charisma" label="{{'CHA' | transloco}}"
                               (detectCharacteristicChange)="setScaleFromCharacteristic(CHARACTERISTIC_CODE.charisma, $event)"
                               class="h-[130px] max-w-[130px]  640:max-w-[150px] 640:h-[150px] 1280:max-w-[180px] 1280:h-[180px] w-full"/>
        </div>
        <div class="grid grid-cols-1 gap-4 1280:grid-cols-2">
          <app-multi-select
            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.immunities)"
            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
            [enableMsr]="false" [measure_code]="MeasuresCodes.immunities"
            [placeholder]="'Select damage:'" label="immunities_damage" [attribute_code]="AttributesCodes.damage"/>
          <app-multi-select
            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.saving_throws)"
            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
            [enableAmt]="true" [measure_code]="MeasuresCodes.saving_throws"
            [enableMsr]="false" [placeholder]="'Saving throws:'"
            [isScalable]="true" [beastCharacteristics]="scaling_from"
            label="saving_throws" [attribute_code]="AttributesCodes.saving_throws"/>
          <app-multi-select [enableMsr]="false"
                            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.resists)"
                            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                            [measure_code]="MeasuresCodes.resists"
                            [placeholder]="'Select damage:'" label="resists_damage"
                            [attribute_code]="AttributesCodes.damage"/>
          <app-multi-select [enableAmt]="true" [enableMsr]="false"
                            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.skills)"
                            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                            [placeholder]="'Select Skill:'" label="skills"
                            [measure_code]="MeasuresCodes.skills"
                            [isScalable]="true" [beastCharacteristics]="scaling_from"
                            [attribute_code]="AttributesCodes.skills"/>
          <app-multi-select [enableMsr]="false"
                            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.vulnerabilities)"
                            [measure_code]="MeasuresCodes.vulnerabilities"
                            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                            [placeholder]="'Select damage:'" label="vulnerabilities_damage"
                            [attribute_code]="AttributesCodes.damage"/>
          <app-multi-select
            [enableMsr]="false" [defaultValues]="filterMeasuresByCategories(MeasuresCodes.conditions)"
            [measure_code]="MeasuresCodes.conditions"
            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
            [placeholder]="'Select condition:'" label="conditions" [attribute_code]="AttributesCodes.conditions"/>
          <app-multi-select [enableAmt]="true"
                            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.feelings)"
                            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                            [enableMsr]="true" [placeholder]="'Select Feel:'" label="feelings"
                            [measure_code]="MeasuresCodes.feelings"
                            [attribute_code]="AttributesCodes.feelings"/>
          <app-multi-select [enableAmt]="true"
                            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.languages)"
                            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                            [alwaysUseMsr]="true"
                            [measure_code]="MeasuresCodes.languages"
                            [placeholder]="'Select Language:'" label="languages"
                            [attribute_code]="AttributesCodes.languages"/>
          <div class="flex flex-col 640:flex-row">
            <div class="flex w-full items-center gap-2">
              <app-label-text [label]="'Danger Lvl'"/>
              <app-input-number formControlName="danger_lvl" class="h-[48px]" placeholder="0"/>
            </div>
            <div class="flex w-full items-center gap-2">
              <app-label-text [label]="'Experience'"/>
              <app-input-text formControlName="experience" class="h-[48px]" placeholder="Experience"/>
            </div>
          </div>
          <div class="flex">
            <div class="flex w-full items-center gap-2">
              <app-label-text [label]="'Mastery bonus'"/>
              <app-input-number (inputChange)="setMasteryScaling($event)" formControlName="mastery_bonus"
                                class="h-[48px]" placeholder="0"/>
            </div>
          </div>
        </div>
        <div>
          <div class="h-[1px] w-full bg-[#E2A23B]"></div>
          <app-title-text-input
            [defaultValues]="filterActionAbilities(ActionAbilities.abilities)"
            [blockName]="'Abilities'"
            [actionCode]="ActionCodes.abilities"
            (addValue)="addActionAbility($event)"
            (removeValue)="removeActionAbility($event)"
            (editValue)="editActionAbility($event)"
          />
          <div class="h-[1px] w-full bg-[#E2A23B]"></div>
        </div>
        <div>
          <app-title-text-input
            [defaultValues]="filterActionAbilities(ActionAbilities.actions)"
            [blockName]="'Actions'" [actionCode]="ActionCodes.actions"
            (addValue)="addActionAbility($event)"
            (removeValue)="removeActionAbility($event)"
            (editValue)="editActionAbility($event)"
          />
          <div class="h-[1px] w-full bg-[#E2A23B]"></div>
        </div>
        <div>
          <app-title-text-input
            [defaultValues]="filterActionAbilities(ActionAbilities.bonusActions)"
            [blockName]="'Bonus Actions'" [actionCode]="ActionCodes.bonusActions"
            (addValue)="addActionAbility($event)"
            (removeValue)="removeActionAbility($event)"
            (editValue)="editActionAbility($event)"
          />
          <div class="h-[1px] w-full bg-[#E2A23B]"></div>
        </div>
        <div>
          <app-title-text-input
            [defaultValues]="filterActionAbilities(ActionAbilities.legendaryActions)"
            [blockName]="'Legendary Actions'" [actionCode]="ActionCodes.legendaryActions"
            (addValue)="addActionAbility($event)"
            (removeValue)="removeActionAbility($event)"
            (editValue)="editActionAbility($event)"
          />
          <div class="h-[1px] w-full bg-[#E2A23B]"></div>
        </div>
        <div>
          <app-multi-select [enableMsr]="false"
                            [defaultValues]="filterMeasuresByCategories(MeasuresCodes.regions)"
                            [measure_code]="MeasuresCodes.regions"
                            (addMeasure)="addMeasure($event)" (removeMeasure)="removeMeasure($event)"
                            [placeholder]="'Select region:'" label="regions"
                            [attribute_code]="AttributesCodes.regions"/>
          <div class="h-[1px] w-full bg-[#E2A23B] mt-5"></div>
        </div>
        <div>
          <h2 class="text-[#E2A23B] playfair-font text-3xl">{{'Description' | transloco}}</h2>
          <div class="flex flex-col gap-10 w-full mt-2 1024:flex-row">
            <app-text-area-input formControlName="description_en" class="w-full h-[200px]" [placeholder]="'EN'"/>
            <app-text-area-input formControlName="description_ua" class="w-full h-[200px]" [placeholder]="'UA'"/>
          </div>
        </div>
        <button (click)="sendForm()"
                class="mx-auto font-semibold w-[260px] 640:w-[400px] h-[80px] rounded-xl bg-[#FAFD5D] text-2xl">
          {{'Save Creature' | transloco}}
        </button>
      </form>
    </div>
  </div>
</mat-drawer-container>
